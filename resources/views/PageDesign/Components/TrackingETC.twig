<script type="x/template" id="vue-tracking">
    <div>
      <div v-html="cookieStatus"></div>
      {{ cookieStatus }}
      <div style="position: absolute; font-size: 15px; font-weight: bold; left: 0; top: 0; width: 100px; height: 100px; background-color: #41CFFF; z-index: 999999999" v-if="cookieStatus == 1"></div>

          {% if services.template.isHome() %}

              {% set BelboonTrackActive = config("CeresCoconut.tracking.belboonTrackingActive") %}
              {% if BelboonTrackActive == "true" %}
                {% set BelboonTrack = config("CeresCoconut.tracking.belboonProgramId") %}
                <script type="text/javascript">
                    belboonTag = {};
                </script>
                <script type="text/javascript">
                (function(d) {
                    var s = d.createElement("script");
                    s.async = true;
                    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//containertags.belboon.de/belboonTag.js.php?pId={{ BelboonTrack }}&page=start&type=dynamic";
                    var a = d.getElementsByTagName("script")[0];
                    a.parentNode.insertBefore(s, a);
                }(document));
                </script>
              {% endif %}
          {% endif %}
            {% if (currTpl == 'tpl.basket') %}
              {% set BelboonTrackActive = config("CeresCoconut.tracking.belboonTrackingActive") %}
              {% if BelboonTrackActive == "true" %}
                {% set BelboonTrack = config("CeresCoconut.tracking.belboonProgramId") %}
                <!-- START BELBOON BASKET TRACKING TEST1206-->
                  {% if basketItemsETC is not defined %}
                      {% set basketItemsETC = services.basket.getBasketItems() %}
                  {% endif %}

                  <script type="text/javascript">
                      belboonTag = {
                          "orderProducts": [
                                {% set c = 0 %}
                                {% for item in basketItemsETC %}
                                  {% if c >= 1 %},{% endif %}
                                  {
                                    "id": "{{ item.itemId }}",
                                    "price": "{{ item.variation.data.calculatedPrices.default.price }}",
                                    "qty": "{{ item.quantity }}"
                                    {% set c = 1 %}
                                  }
                                {% endfor %}
                          ]
                      };
                  </script>
                  <script type="text/javascript">
                      (function(d) {
                          var s = d.createElement("script");
                          s.async = true;
                          s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//containertags.belboon.de/belboonTag.js.php?pId={{ BelboonTrack }}&page=basket&type=dynamic";
                          var a = d.getElementsByTagName("script")[0];
                          a.parentNode.insertBefore(s, a);
                      }(document));
                  </script>
                <!-- ENDE BELBOON BASKET TRACKING -->
              {% endif %}
            {% endif %}

            {% if (currTpl == 'tpl.confirmation') %}
              {% set BelboonTrackActive = config("CeresCoconut.tracking.belboonTrackingActive") %}
              {% if BelboonTrackActive == "true" %}
                {% set BelboonTrack = config("CeresCoconut.tracking.belboonProgramId") %}
                <!-- START BELBOON BASKET TRACKING TEST1206-->

                  <script type="text/javascript">
                      belboonTag = {
                          "orderProducts": [
                                {% set c = 0 %}
                                {% for item in data.order.orderItems %}
                                  {% if item.typeId == 1 %}
                                    {% if c >= 1 %},{% endif %}
                                    {
                                      "id": "{{ item.itemVariationId }}",
                                      "price": "{{ item.amounts[0].purchasePrice }}",
                                      "qty": "{{ item.quantity }}"
                                      {% set c = 1 %}
                                    }
                                  {% endif %}
                                {% endfor %}
                          ]
                      };
                  </script>
                  <script type="text/javascript">
                      (function(d) {
                          var s = d.createElement("script");
                          s.async = true;
                          s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//containertags.belboon.de/belboonTag.js.php?pId={{ BelboonTrack }}&page=checkout&type=dynamic";
                          var a = d.getElementsByTagName("script")[0];
                          a.parentNode.insertBefore(s, a);
                      }(document));
                  </script>
                <!-- ENDE BELBOON BASKET TRACKING -->
              {% endif %}
            {% endif %}
    </div>
</script>

<script>

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Vue.component("tracking", {
  template: "#vue-tracking",
  delimiters: ["${", "}"],
  data()
  {
    return {
        cookieStatus: -1
    };
  },
  created()
  {
      this.getCookieStatus();
  },
  methods: {
    getCookieStatus()
    {
      this.cookieStatus = document.querySelector("input[name=CookieBanner_StateInputPD]").value;
    }
  }
});
</script>
